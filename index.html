<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STATION: VOID 4.1 ‚Äî –¢–µ—Ä–º–∏–Ω–∞–ª</title>

<style>
    :root {
        --bg-body: #050608;
        --terminal-body: #181a1f;
        --terminal-border: #30343c;
        --terminal-shadow: #000000;
        --terminal-inner: #101218;
        --screen-frame: #12141a;
        --screen-border: #3c424e;
        --screen-glass: #030a08;
        --panel-bg: #101712;
        --panel-border: #3ea37a;
        --text-main: #c7ffe6;
        --accent: #8fffd2;
        --accent-dim: #4ac097;
        --danger: #ff5c5c;
        --warn: #ffcc4d;
        --ok: #6bff7a;
        --indicator-off: #23352b;
        --indicator-border: #4b6c57;
        --button-bg: #18231c;
        --button-border: #4b6c57;
        --button-hover: #223628;
    }

    * { box-sizing: border-box; }

    body {
        margin: 0;
        background: radial-gradient(circle at top, #141821 0, #050608 60%, #020306 100%);
        color: var(--text-main);
        font-family: "Courier New", monospace;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        padding: 10px;
    }

    /* –ö–æ—Ä–ø—É—Å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ */
    .terminal {
        background: radial-gradient(circle at top, #242832 0, #15171d 45%, #0b0c10 100%);
        border-radius: 10px;
        border: 3px solid var(--terminal-border);
        box-shadow:
            0 0 40px rgba(0,0,0,0.9),
            0 0 24px rgba(0,0,0,0.9),
            0 0 0 2px #000;
        padding: 12px;
        max-width: 980px;
        width: 100%;
        position: relative;
    }

    /* –ë–æ–ª—Ç—ã */
    .bolt {
        width: 14px;
        height: 14px;
        border-radius: 3px;
        background: radial-gradient(circle at 30% 30%, #888, #444 45%, #222 100%);
        border: 1px solid #111;
        box-shadow:
            0 0 4px rgba(0,0,0,0.9),
            inset 0 0 2px rgba(0,0,0,0.8);
        position: absolute;
    }
    .bolt::before {
        content: "";
        position: absolute;
        inset: 3px;
        border-radius: 2px;
        border-top: 2px solid #222;
        border-bottom: 2px solid #777;
        opacity: 0.8;
    }
    .bolt.top-left { top: 6px; left: 6px; }
    .bolt.top-right { top: 6px; right: 6px; }
    .bolt.bottom-left { bottom: 6px; left: 6px; }
    .bolt.bottom-right { bottom: 6px; right: 6px; }

    /* –¢–∞–±–ª–∏—á–∫–∞ */
    .terminal-label {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        padding: 2px 10px;
        background: linear-gradient(135deg, #40444c, #262a32);
        color: #e3ede8;
        font-size: 11px;
        letter-spacing: 2px;
        text-transform: uppercase;
        border-radius: 2px;
        border: 1px solid #20232a;
        box-shadow: 0 0 4px rgba(0,0,0,0.9);
    }

    /* –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–∞–Ω–µ–ª—å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ */
    .terminal-inner {
        margin-top: 26px;
        background: radial-gradient(circle at top, #181c24 0, #0d1016 55%, #06070b 100%);
        border-radius: 8px;
        padding: 10px;
        border: 2px solid #2b2f36;
        box-shadow:
            inset 0 0 12px rgba(0,0,0,0.9),
            0 0 10px rgba(0,0,0,0.8);
    }

    /* –†–∞–º–∫–∞ —ç–∫—Ä–∞–Ω–∞ */
    .screen-frame {
        background: linear-gradient(145deg, #191d25, #0f1117);
        border-radius: 6px;
        padding: 8px;
        border: 2px solid var(--screen-border);
        box-shadow:
            inset 0 0 18px rgba(0,0,0,0.9),
            0 0 12px rgba(0,0,0,0.9);
    }

    /* –°—Ç–µ–∫–ª–æ —ç–∫—Ä–∞–Ω–∞ (–≥–ª—É–±–æ–∫–æ —É—Ç–æ–ø–ª–µ–Ω–Ω–æ–µ) */
    .screen-glass {
        border-radius: 4px;
        padding: 10px;
        background: radial-gradient(circle at top, #07130f 0, #020705 55%, #000000 100%);
        box-shadow:
            inset 0 0 25px rgba(0,0,0,1),
            inset 0 0 80px rgba(0,0,0,1);
        position: relative;
        overflow: hidden;
    }

    /* –ë–ª–∏–∫ –Ω–∞ —Å—Ç–µ–∫–ª–µ */
    .screen-glass::before {
        content: "";
        position: absolute;
        top: -20%;
        left: -10%;
        width: 60%;
        height: 40%;
        background: linear-gradient(135deg, rgba(255,255,255,0.12), transparent 70%);
        opacity: 0.22;
        transform: rotate(-8deg);
        pointer-events: none;
    }

    /* CRT –∏ —Å—Ç—Ä–æ–∫–∏ */
    .crt {
        position: absolute;
        inset: 0;
        pointer-events: none;
        background:
            repeating-linear-gradient(
                to bottom,
                rgba(0,255,150,0.06) 0px,
                rgba(0,255,150,0.06) 2px,
                rgba(0,255,150,0.02) 2px,
                rgba(0,255,150,0.02) 4px
            );
        mix-blend-mode: screen;
        opacity: 0.8;
        z-index: 50;
        animation: flicker 0.16s infinite;
    }

    @keyframes flicker {
        0% { opacity: 0.75; }
        50% { opacity: 0.95; }
        100% { opacity: 0.8; }
    }

    .container {
        position: relative;
        z-index: 10;
        padding: 6px;
        max-width: 900px;
        margin: 0 auto 10px auto;
    }

    .top-bar {
        text-align: center;
        margin: 5px 0 8px 0;
        font-size: 13px;
        letter-spacing: 3px;
        color: var(--accent);
        text-shadow: 0 0 4px #0f8;
    }

    .panels-grid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 8px;
    }

    @media (max-width: 768px) {
        .panels-grid {
            grid-template-columns: 1fr;
        }
    }

    .panel {
        border: 2px solid var(--panel-border);
        background: var(--panel-bg);
        box-shadow:
            0 0 12px rgba(0,0,0,0.9),
            0 0 12px rgba(40,120,80,0.5) inset;
        padding: 8px;
        margin-bottom: 8px;
    }

    .panel-title {
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 6px;
        color: var(--accent);
        border-bottom: 1px solid rgba(142,255,210,0.3);
        padding-bottom: 3px;
    }

    .status-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 6px;
    }

    @media (max-width: 480px) {
        .status-grid {
            grid-template-columns: 1fr;
        }
    }

    .status-item {
        border: 1px solid var(--panel-border);
        padding: 5px 7px;
        font-size: 12px;
        background: #0c140f;
        display: flex;
        flex-direction: column;
        gap: 3px;
    }

    .status-title {
        font-weight: bold;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .status-value {
        font-size: 11px;
        opacity: 0.9;
    }

    .status-inline {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 11px;
    }

    .indicator-row {
        display: flex;
        gap: 3px;
        margin-top: 2px;
    }

    .indicator {
        min-width: 40px;
        padding: 1px 3px;
        border-radius: 2px;
        border: 1px solid var(--indicator-border);
        font-size: 9px;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: var(--indicator-off);
        color: #6c8f7b;
    }

    .indicator.ok {
        background: rgba(50, 130, 70, 0.85);
        color: #e6ffe6;
        border-color: #8bff8b;
        box-shadow: 0 0 6px rgba(0,255,120,0.7);
    }

    .indicator.warn {
        background: rgba(130, 95, 40, 0.9);
        color: #fff5d2;
        border-color: #ffd86b;
        box-shadow: 0 0 6px rgba(255,210,100,0.6);
    }

    .indicator.err {
        background: rgba(140, 40, 40, 0.95);
        color: #ffe3e3;
        border-color: #ff5c5c;
        box-shadow: 0 0 7px rgba(255,80,80,0.9);
    }

    .module-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 6px;
    }

    @media (max-width: 480px) {
        .module-grid {
            grid-template-columns: 1fr;
        }
    }

    .module {
        border: 2px solid var(--button-border);
        background: #111a14;
        padding: 6px;
        font-size: 12px;
        cursor: pointer;
        position: relative;
        transition: background 0.15s, transform 0.05s, box-shadow 0.15s;
    }

    .module:hover {
        background: #17251d;
        box-shadow: 0 0 8px rgba(80,180,130,0.7);
    }

    .module:active {
        transform: translateY(1px);
        box-shadow: 0 0 3px rgba(40,120,80,0.6);
    }

    .module-name {
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 2px;
        font-size: 11px;
    }

    .module-status {
        font-size: 10px;
        opacity: 0.9;
    }

    .module-indicators {
        margin-top: 3px;
        display: flex;
        gap: 3px;
        flex-wrap: wrap;
    }

    .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
        margin-top: 6px;
    }

    .action-btn {
        flex: 1 1 calc(50% - 4px);
        min-width: 120px;
        border: 2px solid var(--button-border);
        background: var(--button-bg);
        color: var(--text-main);
        font-family: "Courier New", monospace;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 1px;
        padding: 6px;
        cursor: pointer;
        text-align: center;
        box-shadow: 0 0 8px rgba(0,0,0,0.8);
        transition: background 0.15s, transform 0.05s, box-shadow 0.15s;
    }

    .action-btn:hover {
        background: var(--button-hover);
        box-shadow: 0 0 10px rgba(80,180,130,0.7);
    }

    .action-btn:active {
        transform: translateY(1px);
        box-shadow: 0 0 4px rgba(40,120,80,0.7);
    }

    @media (max-width: 480px) {
        .action-btn {
            flex: 1 1 100%;
        }
    }

    .console-wrapper {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    #console-output {
        height: 210px;
        overflow-y: auto;
        background: #050b08;
        padding: 6px;
        border: 2px solid var(--panel-border);
        font-size: 11px;
        white-space: pre-wrap;
    }

    #console-input {
        width: 100%;
        padding: 7px;
        background: #0a1410;
        border: 2px solid var(--button-border);
        color: var(--text-main);
        font-family: "Courier New", monospace;
        font-size: 11px;
    }

    #console-input::placeholder {
        color: #5c7a68;
    }

    .side-panel {
        font-size: 10px;
        line-height: 1.4;
    }

    .hint {
        margin-bottom: 6px;
        color: var(--accent);
    }

    .commands-list {
        border-top: 1px solid rgba(142,255,210,0.3);
        padding-top: 5px;
        margin-top: 5px;
    }

    .commands-list div {
        margin-bottom: 2px;
    }

    .tag {
        display: inline-block;
        border: 1px solid var(--panel-border);
        padding: 1px 3px;
        font-size: 9px;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 3px;
        color: var(--accent-dim);
    }

    .blinking {
        animation: blinkAlert 0.7s infinite;
    }

    @keyframes blinkAlert {
        0% { box-shadow: 0 0 6px rgba(255,80,80,0.2); border-color: var(--danger); }
        50% { box-shadow: 0 0 10px rgba(255,80,80,0.9); border-color: #ffb3b3; }
        100% { box-shadow: 0 0 6px rgba(255,80,80,0.2); border-color: var(--danger); }
    }

    .danger-text { color: var(--danger); }
    .warn-text { color: var(--warn); }
    .ok-text { color: var(--ok); }
}

/* === –í–ò–†–¢–£–ê–õ–¨–ù–ê–Ø –ö–ê–ú–ï–†–ê === */

.camera-panel {
    font-size: 11px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.camera-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 10px;
}

.camera-screen-wrapper {
    position: relative;
    border: 2px solid var(--panel-border);
    background: #000;
    height: 150px;
    overflow: hidden;
    box-shadow:
        0 0 10px rgba(0,0,0,0.9),
        0 0 10px rgba(80,180,130,0.4) inset;
}

#camera-canvas {
    width: 100%;
    height: 100%;
    display: block;
}

.camera-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
        repeating-linear-gradient(
            to bottom,
            rgba(0,255,180,0.05) 0px,
            rgba(0,255,180,0.05) 2px,
            rgba(0,0,0,0.4) 2px,
            rgba(0,0,0,0.4) 4px
        );
    mix-blend-mode: screen;
    animation: camera-flicker 0.18s infinite;
    opacity: 0.8;
}

.camera-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 4px;
}

.camera-btn {
    flex: 1 1 calc(25% - 4px);
    padding: 4px;
    font-size: 10px;
}

.camera-status {
    margin-top: 2px;
    font-size: 10px;
    color: var(--accent-dim);
}

@keyframes camera-flicker {
    0% { opacity: 0.65; }
    50% { opacity: 0.9; }
    100% { opacity: 0.75; }
}

/* –î–æ–ø. —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã */
.camera-screen-wrapper.anomaly {
    box-shadow:
        0 0 14px rgba(255,120,120,0.6),
        0 0 10px rgba(80,180,130,0.4) inset;
}

.camera-controls,
.camera-modes {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 4px;
  margin-top: 4px;
}

@media (max-width: 600px) {
  .camera-controls,
  .camera-modes {
    grid-template-columns: repeat(2, 1fr);
  }
}

</style>
</head>
<body>

<div class="terminal">
    <div class="bolt top-left"></div>
    <div class="bolt top-right"></div>
    <div class="bolt bottom-left"></div>
    <div class="bolt bottom-right"></div>

    <div class="terminal-label">–°–¢–ê–ù–¶–ò–Ø VOID ‚Äî –¢–ï–†–ú–ò–ù–ê–õ ‚Ññ1</div>

    <div class="terminal-inner">
        <div class="screen-frame">
            <div class="screen-glass">
                <div class="crt"></div>

                <div class="container">
                    <div class="top-bar">
                        STATION: VOID ‚Äî –û–ü–ï–†–ê–¢–û–†–°–ö–ò–ô –ü–£–õ–¨–¢ V4.1
                    </div>

                    <div class="panels-grid">
                        <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å -->
                        <div>
                            <!-- –†–µ—Å—É—Ä—Å—ã -->
                            <div class="panel">
                                <div class="panel-title">–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏</div>
                                <div class="status-grid">
                                    <div class="status-item">
                                        <div class="status-inline">
                                            <span class="status-title">–≠–Ω–µ—Ä–≥–∏—è</span>
                                            <span class="status-value" id="energy-value">87%</span>
                                        </div>
                                        <div class="indicator-row">
                                            <div class="indicator ok" id="ind-energy-on">ON</div>
                                            <div class="indicator" id="ind-energy-low">LOW</div>
                                            <div class="indicator" id="ind-energy-crit">CRIT</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-inline">
                                            <span class="status-title">–ö–∏—Å–ª–æ—Ä–æ–¥</span>
                                            <span class="status-value" id="oxy-value">65%</span>
                                        </div>
                                        <div class="indicator-row">
                                            <div class="indicator ok" id="ind-oxy-ok">OK</div>
                                            <div class="indicator warn" id="ind-oxy-low">LOW</div>
                                            <div class="indicator err" id="ind-oxy-crit">CRIT</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-inline">
                                            <span class="status-title">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</span>
                                            <span class="status-value" id="temp-value">-2¬∞C</span>
                                        </div>
                                        <div class="indicator-row">
                                            <div class="indicator" id="ind-temp-low">LOW</div>
                                            <div class="indicator ok" id="ind-temp-ok">OK</div>
                                            <div class="indicator warn" id="ind-temp-high">HIGH</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-inline">
                                            <span class="status-title">–ö–æ—Ä–ø—É—Å</span>
                                            <span class="status-value" id="hull-value">94%</span>
                                        </div>
                                        <div class="indicator-row">
                                            <div class="indicator ok" id="ind-hull-ok">INT</div>
                                            <div class="indicator warn" id="ind-hull-dmg">DMG</div>
                                            <div class="indicator err" id="ind-hull-crit">LEAK</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-inline">
                                            <span class="status-title">–ï–¥–∞</span>
                                            <span class="status-value" id="food-value">48%</span>
                                        </div>
                                        <div class="indicator-row">
                                            <div class="indicator ok" id="ind-food-ok">OK</div>
                                            <div class="indicator warn" id="ind-food-low">LOW</div>
                                            <div class="indicator err" id="ind-food-crit">EMPTY</div>
                                        </div>
                                    </div>
                                    <div class="status-item">
                                        <div class="status-inline">
                                            <span class="status-title">–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å</span>
                                            <span class="status-value" id="stability-value">78%</span>
                                        </div>
                                        <div class="indicator-row">
                                            <div class="indicator ok" id="ind-stab-ok">NORM</div>
                                            <div class="indicator warn" id="ind-stab-unst">UNST</div>
                                            <div class="indicator err" id="ind-stab-crit">FAIL</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- –ú–æ–¥—É–ª–∏ -->
                            <div class="panel">
                                <div class="panel-title">–ú–æ–¥—É–ª–∏ —Å—Ç–∞–Ω—Ü–∏–∏</div>
                                <div class="module-grid">
                                    <div class="module" data-module="reactor">
                                        <div class="module-name">–†–µ–∞–∫—Ç–æ—Ä</div>
                                        <div class="module-status" id="mod-reactor-status">
                                            –°—Ç–∞—Ç—É—Å: –æ–Ω–ª–∞–π–Ω, –Ω–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞
                                        </div>
                                        <div class="module-indicators">
                                            <div class="indicator ok" id="mod-reactor-on">ON</div>
                                            <div class="indicator" id="mod-reactor-safe">SAFE</div>
                                            <div class="indicator warn" id="mod-reactor-hot">HOT</div>
                                        </div>
                                    </div>
                                    <div class="module blinking" data-module="comms">
                                        <div class="module-name">–°–≤—è–∑—å</div>
                                        <div class="module-status" id="mod-comms-status">
                                            –°—Ç–∞—Ç—É—Å: —Å–±–æ–π, –ø–æ–º–µ—Ö–∏ –≤ –∫–∞–Ω–∞–ª–µ
                                        </div>
                                        <div class="module-indicators">
                                            <div class="indicator err" id="mod-comms-fault">FAULT</div>
                                            <div class="indicator warn" id="mod-comms-nolink">NO LINK</div>
                                            <div class="indicator" id="mod-comms-ok">OK</div>
                                        </div>
                                    </div>
                                    <div class="module" data-module="hydro">
                                        <div class="module-name">–ì–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞</div>
                                        <div class="module-status" id="mod-hydro-status">
                                            –°—Ç–∞—Ç—É—Å: –æ—Ñ—Ñ–ª–∞–π–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç—É—Ä–∞
                                        </div>
                                        <div class="module-indicators">
                                            <div class="indicator" id="mod-hydro-on">ON</div>
                                            <div class="indicator warn" id="mod-hydro-low">LOW</div>
                                            <div class="indicator" id="mod-hydro-fault">FAULT</div>
                                        </div>
                                    </div>
                                    <div class="module" data-module="airlock">
                                        <div class="module-name">–®–ª—é–∑—ã</div>
                                        <div class="module-status" id="mod-airlock-status">
                                            –°—Ç–∞—Ç—É—Å: –æ–Ω–ª–∞–π–Ω, –¥–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
                                        </div>
                                        <div class="module-indicators">
                                            <div class="indicator ok" id="mod-airlock-ready">READY</div>
                                            <div class="indicator warn" id="mod-airlock-lock">LOCK</div>
                                            <div class="indicator" id="mod-airlock-fault">FAULT</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- –ö–∞–º–µ—Ä–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è) -->
<div class="panel">
    <div class="panel-title">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</div>

    <div class="camera-panel">
        <div class="camera-header">
            <span class="tag">–°–µ–∫—Ç–æ—Ä</span>
            <span id="camera-sector-label">A-03 / –í–Ω–µ—à–Ω–∏–π –∫–æ—Ä–∏–¥–æ—Ä</span>
        </div>

        <div class="camera-screen-wrapper">
            <canvas id="camera-canvas"></canvas>
            <div class="camera-overlay"></div>
        </div>

        <div class="camera-controls">
            <button class="action-btn camera-btn" data-sector="A-03">A-03</button>
            <button class="action-btn camera-btn" data-sector="B-12">B-12</button>
            <button class="action-btn camera-btn" data-sector="C-07">C-07</button>
            <button class="action-btn camera-btn" data-sector="INT">INT</button>
        </div>
		
		<div class="camera-modes">
    <button class="action-btn camera-mode-btn" data-mode="normal">NORMAL</button>
    <button class="action-btn camera-mode-btn" data-mode="thermal">THERMAL</button>
    <button class="action-btn camera-mode-btn" data-mode="ir">IR</button>
    <button class="action-btn camera-mode-btn" data-mode="spectral">SPECTRAL</button>
</div>

        <div class="camera-status" id="camera-status">
            [–ö–ê–ú–ï–†–ê] –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –∞–∫—Ç–∏–≤–µ–Ω.
        </div>
    </div>
</div>

                        <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å -->
                        <div>
                            <div class="panel">
                                <div class="panel-title">–ö–æ–Ω—Å–æ–ª—å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                                <div class="console-wrapper">
                                    <div id="console-output">
> –°—Ç–∞–Ω—Ü–∏—è VOID –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.
> –í—ã ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—É–ª—å—Ç–∞.

> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã.
> –ü—Ä–∏–º–µ—Ä—ã: status, scan, repair comms, hydro, help.
                                    </div>
                                    <input id="console-input"
                                           placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É (status, scan, repair comms, hydro, airlocks, help)...">
                                </div>

                                <div class="actions">
                                    <button class="action-btn" data-cmd="diagnostic">üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å—Ç–∞–Ω—Ü–∏–∏</button>
                                    <button class="action-btn" data-cmd="check_comms">üì° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑—å</button>
                                    <button class="action-btn" data-cmd="power">üîã –≠–Ω–µ—Ä–≥–æ—Å–∏—Å—Ç–µ–º–∞</button>
                                    <button class="action-btn" data-cmd="hydro_cycle">üå± –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–∏–¥—Ä–æ–ø–æ–Ω–∏–∫—É</button>
                                    <button class="action-btn" data-cmd="airlocks">üö™ –°—Ç–∞—Ç—É—Å —à–ª—é–∑–æ–≤</button>
                                    <button class="action-btn" data-cmd="scan_sector">üõ∞ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ç–æ—Ä</button>
                                </div>
                            </div>

                            <div class="panel">
                                <div class="panel-title">–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –∫–æ–º–∞–Ω–¥—ã</div>
                                <div class="side-panel">
                                    <div class="hint">
                                        <span class="tag">–°–æ–≤–µ—Ç</span><br>
                                        –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –º–æ–¥—É–ª–∏ —Å–ª–µ–≤–∞, —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –∏—Ö –ø–æ–¥—Ä–æ–±–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤ –∫–æ–Ω—Å–æ–ª–∏.
                                    </div>
                                    <div class="hint">
                                        <span class="tag">–ü–æ–¥—Å–∫–∞–∑–∫–∞</span><br>
                                        –î–µ–π—Å—Ç–≤–∏—è –∏ —Å–æ–±—ã—Ç–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ —ç–Ω–µ—Ä–≥–∏—é, –∫–∏—Å–ª–æ—Ä–æ–¥, –µ–¥—É –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.
                                    </div>
                                    <div class="commands-list">
                                        <div><span class="tag">–ö–æ–º–∞–Ω–¥—ã</span></div>
                                        <div><b>help</b> ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥</div>
                                        <div><b>status</b> ‚Äî –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏</div>
                                        <div><b>modules</b> ‚Äî —Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π</div>
                                        <div><b>scan</b> ‚Äî —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π —Å–µ–∫—Ç–æ—Ä</div>
                                        <div><b>repair comms</b> ‚Äî –ø–æ—á–∏–Ω–∏—Ç—å —Å–≤—è–∑—å</div>
                                        <div><b>reactor</b> ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–∞–∫—Ç–æ—Ä–∞</div>
                                        <div><b>hydro</b> ‚Äî –≥–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞ (—Ü–∏–∫–ª)</div>
                                        <div><b>airlocks</b> ‚Äî —à–ª—é–∑—ã</div>
                                        <div><b>eat</b> ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø–∞—Å –µ–¥—ã</div>
                                        <div><b>sleep</b> ‚Äî —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫–∏ (—á—É—Ç—å –ø–æ–≤—ã—à–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <!-- panels-grid -->
                </div> <!-- container -->
            </div> <!-- screen-glass -->
        </div> <!-- screen-frame -->
    </div> <!-- terminal-inner -->
</div> <!-- terminal -->

<script>
    const consoleOutput = document.getElementById("console-output");
    const consoleInput = document.getElementById("console-input");
    const actionButtons = document.querySelectorAll(".action-btn");
    const modules = document.querySelectorAll(".module");

    const state = {
        energy: 87,
        oxy: 65,
        temp: -2,
        hull: 94,
        food: 48,
        stability: 78,
        reactorOn: true,
        commsOnline: false,
        hydroOnline: false,
        airlockRestricted: true,
        commsLevel: 0, // 0‚Äì2
    };

    function clamp(v, min, max) {
        return Math.max(min, Math.min(max, v));
    }

    function toggleIndicator(id, active, mode) {
        const el = document.getElementById(id);
        if (!el) return;
        el.classList.remove("ok", "warn", "err");
        if (active) {
            if (mode === "ok") el.classList.add("ok");
            if (mode === "warn") el.classList.add("warn");
            if (mode === "err") el.classList.add("err");
        }
    }

    function updateUI() {
        document.getElementById("energy-value").textContent = state.energy + "%";
        document.getElementById("oxy-value").textContent = state.oxy + "%";
        document.getElementById("hull-value").textContent = state.hull + "%";
        document.getElementById("food-value").textContent = state.food + "%";
        document.getElementById("stability-value").textContent = state.stability + "%";
        document.getElementById("temp-value").textContent = state.temp + "¬∞C";

        toggleIndicator("ind-energy-on", state.energy > 15, "ok");
        toggleIndicator("ind-energy-low", state.energy <= 40 && state.energy > 15, "warn");
        toggleIndicator("ind-energy-crit", state.energy <= 15, "err");

        toggleIndicator("ind-oxy-ok", state.oxy >= 50, "ok");
        toggleIndicator("ind-oxy-low", state.oxy < 50 && state.oxy > 20, "warn");
        toggleIndicator("ind-oxy-crit", state.oxy <= 20, "err");

        toggleIndicator("ind-temp-ok", state.temp >= -10 && state.temp <= 10, "ok");
        toggleIndicator("ind-temp-low", state.temp < -10, "warn");
        toggleIndicator("ind-temp-high", state.temp > 10, "warn");

        toggleIndicator("ind-hull-ok", state.hull >= 75, "ok");
        toggleIndicator("ind-hull-dmg", state.hull < 75 && state.hull > 40, "warn");
        toggleIndicator("ind-hull-crit", state.hull <= 40, "err");

        toggleIndicator("ind-food-ok", state.food >= 40, "ok");
        toggleIndicator("ind-food-low", state.food < 40 && state.food > 10, "warn");
        toggleIndicator("ind-food-crit", state.food <= 10, "err");

        toggleIndicator("ind-stab-ok", state.stability >= 60, "ok");
        toggleIndicator("ind-stab-unst", state.stability < 60 && state.stability > 25, "warn");
        toggleIndicator("ind-stab-crit", state.stability <= 25, "err");

        const commsModule = document.querySelector('[data-module="comms"]');
        const commsStatus = document.getElementById("mod-comms-status");
        if (state.commsLevel === 0) {
            commsStatus.textContent = "–°—Ç–∞—Ç—É—Å: —Å–±–æ–π, –º–æ–¥—É–ª—å –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç";
            commsModule.classList.add("blinking");
        } else if (state.commsLevel === 1) {
            commsStatus.textContent = "–°—Ç–∞—Ç—É—Å: —á–∞—Å—Ç–∏—á–Ω–æ –æ–Ω–ª–∞–π–Ω, –ø–æ–º–µ—Ö–∏ –∑–∞–º–µ—Ç–Ω—ã";
            commsModule.classList.remove("blinking");
        } else {
            commsStatus.textContent = "–°—Ç–∞—Ç—É—Å: –æ–Ω–ª–∞–π–Ω, –ø—Ä–∏—ë–º —É—Å—Ç–æ–π—á–∏–≤";
            commsModule.classList.remove("blinking");
        }

        const hydroStatus = document.getElementById("mod-hydro-status");
        if (!state.hydroOnline) {
            hydroStatus.textContent = "–°—Ç–∞—Ç—É—Å: –æ—Ñ—Ñ–ª–∞–π–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç—É—Ä–∞";
        } else {
            hydroStatus.textContent = "–°—Ç–∞—Ç—É—Å: –æ–Ω–ª–∞–π–Ω, –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏–µ –∫—É–ª—å—Ç—É—Ä—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ";
        }
    }

    function addToConsole(text) {
        consoleOutput.textContent += "\n" + text + "\n";
        consoleOutput.scrollTop = consoleOutput.scrollHeight;
    }

    function addCommandToConsole(cmd) {
        consoleOutput.textContent += "\n> " + cmd + "\n";
        consoleOutput.scrollTop = consoleOutput.scrollHeight;
    }

    consoleInput.addEventListener("keydown", function(e) {
        if (e.key === "Enter") {
            const cmd = consoleInput.value.trim();
            if (cmd !== "") {
                addCommandToConsole(cmd);
                processCommand(cmd);
                consoleInput.value = "";
            }
        }
    });

    actionButtons.forEach(btn => {
        btn.addEventListener("click", () => {
            const cmd = btn.getAttribute("data-cmd");
            addCommandToConsole(cmd);
            processCommand(cmd);
        });
    });

    modules.forEach(mod => {
        mod.addEventListener("click", () => {
            const name = mod.getAttribute("data-module");
            handleModuleClick(name);
        });
    });

    function handleModuleClick(name) {
        if (name === "reactor") {
            addToConsole(
"[–†–ï–ê–ö–¢–û–†]\n" +
"–ú–æ—â–Ω–æ—Å—Ç—å: 73%. –†–µ–∑–µ—Ä–≤: 18%.\n" +
"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–æ—Ä–ø—É—Å–∞ ‚Äî –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã.\n" +
"–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏–∑–±–µ–≥–∞—Ç—å —Ä–µ–∑–∫–∏—Ö —Å–∫–∞—á–∫–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏."
            );
        } else if (name === "comms") {
            addToConsole(
"[–°–í–Ø–ó–¨]\n" +
( state.commsLevel === 0
  ? "–ú–æ–¥—É–ª—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á—ë–Ω. –¢—Ä–µ–±—É–µ—Ç—Å—è 'repair comms'."
  : state.commsLevel === 1
    ? "–ö–∞–Ω–∞–ª —á–∞—Å—Ç–∏—á–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü–æ–º–µ—Ö–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç."
    : "–ö–∞–Ω–∞–ª —Å—Ç–∞–±–∏–ª–µ–Ω. –í–æ–∑–º–æ–∂–µ–Ω –ø—Ä–∏—ë–º –≤–Ω–µ—à–Ω–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤."
)
            );
        } else if (name === "hydro") {
            addToConsole(
"[–ì–ò–î–†–û–ü–û–ù–ò–ö–ê]\n" +
(state.hydroOnline
 ? "–ö–æ–Ω—Ç—É—Ä –≤ —Ä–∞–±–æ—Ç–µ. –ö—É–ª—å—Ç—É—Ä–∞ —Ä–∞—Å—Ç—ë—Ç, –Ω–æ —É—Å–ª–æ–≤–∏—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã."
 : "–ö–æ–Ω—Ç—É—Ä –æ—Ñ—Ñ–ª–∞–π–Ω. –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ü–∏–∫–ª (–∫–æ–º–∞–Ω–¥–∞: hydro)."
)
            );
        } else if (name === "airlock") {
            addToConsole(
"[–®–õ–Æ–ó–´]\n" +
(state.airlockRestricted
 ? "–í–Ω–µ—à–Ω–∏–µ —à–ª—é–∑—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏."
 : "–ß–∞—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —à–ª—é–∑–æ–≤ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ–Ω."
)
            );
        }
    }

    function useEnergy(amount, reason) {
        state.energy = clamp(state.energy - amount, 0, 100);
        if (amount > 0) {
            addToConsole("[–≠–ù–ï–†–ì–ò–Ø] -" + amount + "% (" + reason + "). –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: " + state.energy + "%.");
        }
        if (state.energy <= 10) {
            addToConsole("[–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï] –≠–Ω–µ—Ä–≥–∏—è –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ. –ß–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π —Å—Ç–∞–Ω—Ü–∏–∏ –º–æ–∂–µ—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è.");
        }
        updateUI();
    }

    function processCommand(cmdRaw) {
        const cmd = cmdRaw.toLowerCase();

        if (cmd === "help") {
            addToConsole(
"[–°–ü–ò–°–û–ö –ö–û–ú–ê–ù–î]\n" +
"status ‚Äî –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏\n" +
"modules ‚Äî —Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π\n" +
"scan ‚Äî —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ç–æ—Ä–∞ (—Ç—Ä–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏—é)\n" +
"repair comms ‚Äî —Ä–µ–º–æ–Ω—Ç —Å–≤—è–∑–∏ (—Ç—Ä–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏—é)\n" +
"reactor ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–∞–∫—Ç–æ—Ä–∞\n" +
"hydro ‚Äî –∑–∞–ø—É—Å–∫/–ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∏\n" +
"airlocks ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —à–ª—é–∑–æ–≤\n" +
"eat ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø–∞—Å –µ–¥—ã (—á—É—Ç—å –ø–æ–≤—ã—à–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)\n" +
"sleep ‚Äî —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫–∏, –Ω–µ–º–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è\n" +
"help ‚Äî —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫"
            );
        }
        else if (cmd === "status") {
            addToConsole(
"[–°–¢–ê–¢–£–° –°–¢–ê–ù–¶–ò–ò]\n" +
"–≠–Ω–µ—Ä–≥–∏—è: " + state.energy + "%\n" +
"–ö–∏—Å–ª–æ—Ä–æ–¥: " + state.oxy + "%\n" +
"–ï–¥–∞: " + state.food + "%\n" +
"–ö–æ—Ä–ø—É—Å: " + state.hull + "%\n" +
"–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: " + state.stability + "%\n" +
"–°–≤—è–∑—å: " + (state.commsLevel === 0 ? "–æ—Ç–∫–ª—é—á–µ–Ω–∞" : state.commsLevel === 1 ? "–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞" : "—Å—Ç–∞–±–∏–ª—å–Ω–∞") + "\n" +
"–ì–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞: " + (state.hydroOnline ? "–æ–Ω–ª–∞–π–Ω" : "–æ—Ñ—Ñ–ª–∞–π–Ω")
            );
        }
        else if (cmd === "modules") {
            addToConsole(
"[–ú–û–î–£–õ–ò]\n" +
"–†–µ–∞–∫—Ç–æ—Ä ‚Äî " + (state.reactorOn ? "–æ–Ω–ª–∞–π–Ω" : "–æ—Ñ—Ñ–ª–∞–π–Ω") + "\n" +
"–°–≤—è–∑—å ‚Äî " + (state.commsLevel === 0 ? "—Å–±–æ–π" : "–∞–∫—Ç–∏–≤–Ω–∞") + "\n" +
"–ì–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞ ‚Äî " + (state.hydroOnline ? "–æ–Ω–ª–∞–π–Ω" : "–æ—Ñ—Ñ–ª–∞–π–Ω") + "\n" +
"–®–ª—é–∑—ã ‚Äî " + (state.airlockRestricted ? "–æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã" : "—á–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã")
            );
        }
        else if (cmd === "scan" || cmd === "scan_sector") {
            if (state.energy <= 5) {
                addToConsole("[–û–¢–ö–õ–û–ù–ï–ù–û] –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.");
                return;
            }
            useEnergy(3, "—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ç–æ—Ä–∞");
            if (state.commsLevel === 0) {
                addToConsole(
"[–°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï]\n" +
"–°–µ–Ω—Å–æ—Ä—ã –∞–∫—Ç–∏–≤–Ω—ã, –Ω–æ –º–æ–¥—É–ª—å —Å–≤—è–∑–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ.\n" +
"–í—ã –≤–∏–¥–∏—Ç–µ –ª–∏—à—å —à—É–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞."
                );
            } else if (state.commsLevel === 1) {
                addToConsole(
"[–°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï]\n" +
"–§–æ–Ω–æ–≤—ã–π —à—É–º –ø–æ–≤—ã—à–µ–Ω. –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–ª–∞–±—ã–µ —Å–∏–≥–Ω–∞–ª—ã, –Ω–æ –ø–æ–º–µ—Ö–∏ –º–µ—à–∞—é—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–µ."
                );
            } else {
                addToConsole(
"[–°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï]\n" +
"–ù–∞ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç—ã–π —Å–∏–≥–Ω–∞–ª.\n" +
"–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ."
                );
            }
        }
        else if (cmd === "repair comms") {
            if (state.energy <= 8) {
                addToConsole("[–û–¢–ö–õ–û–ù–ï–ù–û] –≠–Ω–µ—Ä–≥–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ —Ä–µ–º–æ–Ω—Ç–∞ —Å–≤—è–∑–∏.");
                return;
            }
            useEnergy(6, "—Ä–µ–º–æ–Ω—Ç —Å–≤—è–∑–∏");
            addToConsole("[–û–ü–ï–†–ê–¶–ò–Ø] –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–π –ª–∏–Ω–∏–∏...");
            setTimeout(() => {
                if (Math.random() < 0.3) {
                    addToConsole("[–°–í–Ø–ó–¨] –†–µ–º–æ–Ω—Ç –Ω–µ —É–¥–∞–ª—Å—è. –ú–æ–¥—É–ª—å –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç.");
                } else {
                    state.commsLevel = clamp(state.commsLevel + 1, 0, 2);
                    if (state.commsLevel === 1) {
                        addToConsole("[–°–í–Ø–ó–¨] –ö–∞–Ω–∞–ª —á–∞—Å—Ç–∏—á–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü–æ–º–µ—Ö–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –Ω–æ —Å–∏–≥–Ω–∞–ª —É—Å—Ç–æ–π—á–∏–≤–µ–µ.");
                    } else {
                        addToConsole("[–°–í–Ø–ó–¨] –ú–æ–¥—É–ª—å —Å–≤—è–∑–∏ —Å—Ç–∞–±–∏–ª–µ–Ω. –ü—Ä–∏—ë–º –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤–æ–∑–º–æ–∂–Ω—ã.");
                    }
                    updateUI();
                }
            }, 600);
        }
        else if (cmd === "reactor") {
            addToConsole(
"[–†–ï–ê–ö–¢–û–†]\n" +
"–ú–æ—â–Ω–æ—Å—Ç—å: 73%. –†–µ–∑–µ—Ä–≤: 18%.\n" +
"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ.\n" +
"–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º, –ø–æ–∫–∞ –≤–Ω–µ—à–Ω–∏–π —Ñ–æ–Ω –Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω."
            );
        }
        else if (cmd === "hydro" || cmd === "hydro_cycle") {
            if (state.energy <= 7) {
                addToConsole("[–û–¢–ö–õ–û–ù–ï–ù–û] –≠–Ω–µ—Ä–≥–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≥–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∏.");
                return;
            }
            useEnergy(5, "–∑–∞–ø—É—Å–∫ –≥–∏–¥—Ä–æ–ø–æ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞");
            addToConsole(
"[–ì–ò–î–†–û–ü–û–ù–ò–ö–ê] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å–æ—Å–æ–≤, –∫–ª–∞–ø–∞–Ω–æ–≤ –∏ –¥–∞–≤–ª–µ–Ω–∏—è...\n" +
"–û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏..."
            );
            setTimeout(() => {
                state.hydroOnline = true;
                const foodGain = 8 + Math.floor(Math.random() * 7);
                state.food = clamp(state.food + foodGain, 0, 100);
                state.stability = clamp(state.stability + 3, 0, 100);
                addToConsole(
"[–ì–ò–î–†–û–ü–û–ù–ò–ö–ê]\n" +
"–ö–æ–Ω—Ç—É—Ä –≤—ã—à–µ–ª –Ω–∞ —Ä–∞–±–æ—á–∏–π —Ä–µ–∂–∏–º.\n" +
"–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –∑–∞–ø–∞—Å–æ–≤ –µ–¥—ã: +" + foodGain + "%."
                );
                updateUI();
            }, 800);
        }
        else if (cmd === "airlocks") {
            addToConsole(
"[–®–õ–Æ–ó–´]\n" +
(state.airlockRestricted
 ? "–í–Ω–µ—à–Ω–∏–µ —à–ª—é–∑—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π."
 : "–ß–∞—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —à–ª—é–∑–æ–≤ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –õ—é–±—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏."
)
            );
        }
        else if (cmd === "eat") {
            if (state.food <= 5) {
                addToConsole("[–ï–î–ê] –ó–∞–ø–∞—Å—ã —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã. –õ—é–±–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Å–µ–π—á–∞—Å —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ.");
                return;
            }
            const use = 6;
            state.food = clamp(state.food - use, 0, 100);
            state.stability = clamp(state.stability + 5, 0, 100);
            addToConsole(
"[–ï–î–ê]\n" +
"–ß–∞—Å—Ç—å –ø–∞–π–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ (-" + use + "%).\n" +
"–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤—ã—Ä–æ—Å–ª–∞: —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ " + state.stability + "%."
            );
            updateUI();
        }
        else if (cmd === "sleep") {
            addToConsole(
"[–†–ï–ñ–ò–ú –°–ù–ò–ñ–ï–ù–ù–´–• –ù–ê–ì–†–£–ó–û–ö]\n" +
"–ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω—ã."
            );
            state.stability = clamp(state.stability + 7, 0, 100);
            useEnergy(2, "–ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞");
            updateUI();
        }
        else if (cmd === "diagnostic" || cmd === "–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞" || cmd === "diagnostic station") {
            addToConsole(
"[–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê]\n" +
"- –≠–Ω–µ—Ä–≥–æ—Å–∏—Å—Ç–µ–º–∞: " + state.energy + "%\n" +
"- –ö–∏—Å–ª–æ—Ä–æ–¥: " + state.oxy + "%\n" +
"- –ó–∞–ø–∞—Å—ã –µ–¥—ã: " + state.food + "%\n" +
"- –°–≤—è–∑—å: " + (state.commsLevel === 0 ? "–æ—Ç–∫–ª—é—á–µ–Ω–∞" : "–∞–∫—Ç–∏–≤–Ω–∞") + "\n" +
"- –ì–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞: " + (state.hydroOnline ? "–æ–Ω–ª–∞–π–Ω" : "–æ—Ñ—Ñ–ª–∞–π–Ω") + "\n" +
"- –ö–æ—Ä–ø—É—Å: " + state.hull + "%\n" +
"- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: " + state.stability + "%"
            );
        }
        else if (cmd === "check_comms") {
            addToConsole(
"[–ü–†–û–í–ï–†–ö–ê –°–í–Ø–ó–ò]\n" +
(state.commsLevel === 0
 ? "–û—Ç–≤–µ—Ç–∞ –Ω–µ—Ç. –ú–æ–¥—É–ª—å –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞ —Å–≤—è–∑—å."
 : state.commsLevel === 1
   ? "–°–∏–≥–Ω–∞–ª –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ —É—Ä–æ–≤–µ–Ω—å –ø–æ–º–µ—Ö –æ—Å—Ç–∞—ë—Ç—Å—è –≤—ã—Å–æ–∫–∏–º."
   : "–ö–∞–Ω–∞–ª —Å—Ç–∞–±–∏–ª–µ–Ω. –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏—ë–º –≤–Ω–µ—à–Ω–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤."
)
            );
        }
        else if (cmd === "power") {
            addToConsole(
"[–≠–ù–ï–†–ì–û–°–ò–°–¢–ï–ú–ê]\n" +
"–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—É—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç. –†–µ–∑–µ—Ä–≤–Ω—ã–µ —è—á–µ–π–∫–∏ –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è.\n" +
"–ü–∏–∫–æ–≤—ã—Ö –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫ –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ü–∏–∫–ª."
            );
        }
		
		else if (cmd === "camera history") {
    if (cameraLogHistory.length === 0) {
        addToConsole("[–ö–ê–ú–ï–†–ê] –ê—Ä—Ö–∏–≤ –ø—É—Å—Ç.");
    } else {
        addToConsole("[–ö–ê–ú–ï–†–ê] –ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:");
        cameraLogHistory.forEach(entry => {
            addToConsole(entry);
        });
    }
}

else if (cmd === "camera stats") {
    addToConsole(
"[–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–ê–ú–ï–†–´]\n" +
"–ó–∞–≤–∏—Å–∞–Ω–∏–π: " + cameraStats.freeze + "\n" +
"–ü–æ—Ç–µ—Ä—å —Å–∏–≥–Ω–∞–ª–∞: " + cameraStats.blackout + "\n" +
"–í—Å–ø—ã—à–µ–∫: " + cameraStats.flash + "\n" +
"–ì–ª–∏—Ç—á–µ–π: " + cameraStats.glitch + "\n" +
"–ê–Ω–æ–º–∞–ª—å–Ω—ã—Ö –ø–∏–∫–æ–≤: " + cameraStats.anomaly + "\n" +
"–°–∏–ª—É—ç—Ç–æ–≤: " + cameraStats.silhouette
    );
}

        else {
            addToConsole("[–°–ò–°–¢–ï–ú–ê] –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –í–≤–µ–¥–∏—Ç–µ 'help' –¥–ª—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.");
        }

        updateUI();
    }

    function randomEventTick() {
        if (Math.random() < 0.6) {
            triggerRandomEvent();
        }
        const nextDelay = 20000 + Math.random() * 20000;
        setTimeout(randomEventTick, nextDelay);
    }

    function triggerRandomEvent() {
        const r = Math.random();
        if (r < 0.35) {
            triggerAccidentEvent();
        } else if (r < 0.7) {
            triggerSignalEvent();
        } else {
            triggerAnomalyEvent();
        }
    }

    function triggerAccidentEvent() {
        const lowStab = state.stability < 40;
        const accidents = [
            "–ü–∞–¥–µ–Ω–∏–µ –¥–∞–≤–ª–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –∏–∑ –∫–æ–Ω—Ç—É—Ä–æ–≤.",
            "–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≥—Ä–µ–≤ –ø–æ–¥–ø–∞–Ω–µ–ª–µ–π.",
            "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è –∫–æ—Ä–ø—É—Å–∞.",
            "–°–±–æ–π –≤ –ø–æ–¥—Å–∏—Å—Ç–µ–º–µ –¥–∞—Ç—á–∏–∫–æ–≤ –ø–æ–ª–æ–∂–µ–Ω–∏—è.",
            "–ö—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–ª –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ —Å–µ—Ç–∏."
        ];
        const choice = accidents[Math.floor(Math.random() * accidents.length)];

        addToConsole("[–ê–í–ê–†–ò–ô–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï]\n" + choice);

        const dmg = lowStab ? 5 + Math.random() * 7 : 2 + Math.random() * 4;
        state.hull = clamp(state.hull - Math.round(dmg), 0, 100);
        state.stability = clamp(state.stability - (lowStab ? 6 : 3), 0, 100);

        if (state.hull < 50) {
            addToConsole("[–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï] –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä–ø—É—Å–∞ —É—Ö—É–¥—à–∞–µ—Ç—Å—è. –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: " + state.hull + "%.");
        }

        if (state.hull < 40 && Math.random() < 0.4) {
            state.oxy = clamp(state.oxy - (4 + Math.floor(Math.random() * 5)), 0, 100);
            addToConsole("[–û–ü–ê–°–ù–û] –í–µ—Ä–æ—è—Ç–Ω—ã –º–∏–∫—Ä–æ–ø—Ä–æ—Ç–µ—á–∫–∏. –£—Ä–æ–≤–µ–Ω—å –∫–∏—Å–ª–æ—Ä–æ–¥–∞ —Å–Ω–∏–∂–∞–µ—Ç—Å—è.");
        }

        updateUI();
    }

    function triggerSignalEvent() {
        if (state.commsLevel === 0) {
            addToConsole(
"[–°–ò–ì–ù–ê–õ]\n" +
"–ß—Ç–æ-—Ç–æ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–±–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ —à—É–º, –Ω–æ –º–æ–¥—É–ª—å —Å–≤—è–∑–∏ –Ω–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ."
            );
            return;
        }

        const strength = 20 + Math.floor(Math.random() * 60);
        const readable = state.commsLevel === 2 && strength > 40;
        addToConsole(
"[–í–ù–ï–®–ù–ò–ô –°–ò–ì–ù–ê–õ]\n" +
"–£—Ä–æ–≤–µ–Ω—å: " + strength + "%.\n" +
( readable
  ? "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥. –ú–æ–∂–Ω–æ –≤–æ–æ–±—Ä–∞–∑–∏—Ç—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É."
  : "–°–∏–≥–Ω–∞–ª —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω. –î–µ—Ç–∞–ª–∏ —Ä–∞–∑–º—ã—Ç—ã."
)
        );
    }

    function triggerAnomalyEvent() {
        const anomalies = [
            "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –æ–¥–Ω–æ–º –∏–∑ –æ—Ç—Å–µ–∫–æ–≤ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –±–µ–∑ –≤–∏–¥–∏–º–æ–π –ø—Ä–∏—á–∏–Ω—ã.",
            "–°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –Ω–∞ —Å—Ö–µ–º–∞—Ö.",
            "–ù–∞ –¥–æ–ª—é —Å–µ–∫—É–Ω–¥—ã –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–∏—Å—Ç–µ–º —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å –≤–¥–≤–æ–µ.",
            "–õ–æ–≥ —Å–æ–æ–±—â–∞–µ—Ç –æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –≤ –¥–≤—É—Ö —Ç–æ—á–∫–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.",
            "–ö—Ä–∞—Ç–∫–∏–π –∏–º–ø—É–ª—å—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ—à—ë–ª —á–µ—Ä–µ–∑ –æ–±—à–∏–≤–∫—É."
        ];
        const choice = anomalies[Math.floor(Math.random() * anomalies.length)];
        addToConsole("[–ê–ù–û–ú–ê–õ–ò–Ø]\n" + choice);

        state.stability = clamp(state.stability - (2 + Math.floor(Math.random() * 4)), 0, 100);
        updateUI();
    }

// === –í–ò–†–¢–£–ê–õ–¨–ù–ê–Ø –ö–ê–ú–ï–†–ê (–ü–†–û–ö–ê–ß–ê–ù–ù–ê–Ø) ===

const cameraCanvas = document.getElementById("camera-canvas");
const cameraCtx = cameraCanvas.getContext("2d");
const cameraSectorLabel = document.getElementById("camera-sector-label");
const cameraStatus = document.getElementById("camera-status");
const cameraButtons = document.querySelectorAll(".camera-btn");
const cameraScreenWrapper = document.querySelector(".camera-screen-wrapper");

let currentSector = "A-03";
let lastTime = 0;

// === –†–ï–ñ–ò–ú–´ –ö–ê–ú–ï–†–´ ===
let cameraMode = "normal";
let cameraLogHistory = [];

// === –°–û–ë–´–¢–ò–Ø –ö–ê–ú–ï–†–´ ===
let cameraFreeze = false;       // –∑–∞–≤–∏—Å–∞–Ω–∏–µ –∫–∞–¥—Ä–∞
let cameraBlackout = false;     // –ø–æ—Ç–µ—Ä—è —Å–∏–≥–Ω–∞–ª–∞
let cameraFlash = false;        // –≤—Å–ø—ã—à–∫–∞
let cameraStrongGlitch = false; // —Å–∏–ª—å–Ω—ã–π –≥–ª–∏—Ç—á
let cameraStaticBoost = false;  // –∞–Ω–æ–º–∞–ª—å–Ω—ã–π –ø–∏–∫
let cameraSilhouetteHold = 0;   // –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã–π —Å–∏–ª—É—ç—Ç (–∫–∞–¥—Ä—ã)

// === –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–ê–ú–ï–†–´ ===
let cameraStats = {
    freeze: 0,
    blackout: 0,
    flash: 0,
    glitch: 0,
    anomaly: 0,
    silhouette: 0
};

const cameraModeButtons = document.querySelectorAll(".camera-mode-btn");

cameraModeButtons.forEach(btn => {
    btn.addEventListener("click", () => {
        cameraMode = btn.getAttribute("data-mode");
        cameraStatus.textContent = "[–ö–ê–ú–ï–†–ê] –†–µ–∂–∏–º: " + cameraMode.toUpperCase();
        addToConsole("[–ö–ê–ú–ï–†–ê] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –Ω–∞ " + cameraMode.toUpperCase());
    });
});

// —Ä–∞–∑–º–µ—Ä—ã —Ö–æ–ª—Å—Ç–∞ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞
function resizeCameraCanvas() {
    if (!cameraCanvas) return;
    cameraCanvas.width = cameraCanvas.clientWidth;
    cameraCanvas.height = cameraCanvas.clientHeight;
}
resizeCameraCanvas();
window.addEventListener("resize", resizeCameraCanvas);

// –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º: —Ü–≤–µ—Ç, –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –ø–æ–º–µ—Ö, —à–∞–Ω—Å —Å–∏–ª—É—ç—Ç–æ–≤ –∏ —Ç.–ø.
const sectorProfiles = {
    "A-03": {
        label: "A-03 / –í–Ω–µ—à–Ω–∏–π –∫–æ—Ä–∏–¥–æ—Ä",
        noiseMultiplier: 1.0,
        tint: [0.7, 1.0, 0.7],    // —Å–ª–µ–≥–∫–∞ –∑–µ–ª–µ–Ω–æ‚Äë–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π
        glitchChance: 0.03,
        silhouetteChance: 0.015
    },
    "B-12": {
        label: "B-12 / –£–∑–µ–ª —Å–∏–ª–æ–≤—ã—Ö —à–∏–Ω",
        noiseMultiplier: 1.4,
        tint: [1.0, 0.95, 0.6],   // —Ç–µ–ø–ª—ã–π, ‚Äú–≥–æ—Ä—è—á–∏–π‚Äù —à—É–º
        glitchChance: 0.07,
        silhouetteChance: 0.01
    },
    "C-07": {
        label: "C-07 / –ì—Ä—É–∑–æ–≤–æ–π –æ—Ç—Å–µ–∫",
        noiseMultiplier: 0.7,
        tint: [0.6, 0.75, 1.0],   // —Ö–æ–ª–æ–¥–Ω—ã–π, –±–ª–∏–∂–µ –∫ —Å–∏–Ω–µ–º—É
        glitchChance: 0.04,
        silhouetteChance: 0.03
    },
    "INT": {
        label: "INT / –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–æ–¥—É–ª—å",
        noiseMultiplier: 0.9,
        tint: [0.9, 1.0, 0.9],    // –ø–æ—á—Ç–∏ —á–∏—Å—Ç—ã–π
        glitchChance: 0.02,
        silhouetteChance: 0.008
    }
};

function getSectorProfile(sector) {
    return sectorProfiles[sector] || sectorProfiles["A-03"];
}

function setCameraSector(sector) {
    currentSector = sector;
    const profile = getSectorProfile(sector);
    cameraSectorLabel.textContent = profile.label;
    cameraStatus.textContent = "[–ö–ê–ú–ï–†–ê] –°–µ–∫—Ç–æ—Ä –∞–∫—Ç–∏–≤–µ–Ω: " + profile.label + ".";
    addToConsole("[–ö–ê–ú–ï–†–ê] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–µ–∫—Ç–æ—Ä " + profile.label + ".");
}

// –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º A‚Äë03 / B‚Äë12 / C‚Äë07 / INT
cameraButtons.forEach(btn => {
    btn.addEventListener("click", () => {
        const sector = btn.getAttribute("data-sector");
        setCameraSector(sector);
    });
});

// –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
function randRange(min, max) {
    return min + Math.random() * (max - min);
}

// === –õ–û–ì–ò –ö–ê–ú–ï–†–´ ===
function cameraLog(message) {
    const timestamp = new Date().toLocaleTimeString();
    const entry = `[${timestamp}] ${message}`;
    addToConsole("[–ö–ê–ú–ï–†–ê] " + message);

    cameraLogHistory.push(entry);
    if (cameraLogHistory.length > 20) {
        cameraLogHistory.shift(); // —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ
    }
}

// —Ä–∏—Å—É–µ–º —à—É–º + –≥–ª–∏—Ç—á–∏ + —Å–∏–ª—É—ç—Ç—ã
function drawCameraFrame(timestamp) {

// === 1. –ó–∞–≤–∏—Å–∞–Ω–∏–µ –∫–∞–¥—Ä–∞ ===
if (cameraFreeze) {
    requestAnimationFrame(drawCameraFrame);
    return;
}

// === 2. –ü–æ—Ç–µ—Ä—è —Å–∏–≥–Ω–∞–ª–∞ ===
if (cameraBlackout) {
    cameraCtx.fillStyle = "black";
    cameraCtx.fillRect(0, 0, cameraCanvas.width, cameraCanvas.height);
    requestAnimationFrame(drawCameraFrame);
    return;
}
    if (!cameraCanvas || !cameraCtx) return;

    const dt = (timestamp - lastTime) || 16;
    lastTime = timestamp;

    const w = cameraCanvas.width;
    const h = cameraCanvas.height;
    if (w === 0 || h === 0) {
        requestAnimationFrame(drawCameraFrame);
        return;
    }

    const profile = getSectorProfile(currentSector);
	
	// === –†–µ–∞–∫—Ü–∏—è –∫–∞–º–µ—Ä—ã –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ ===

// 1) –≠–Ω–µ—Ä–≥–∏—è
if (state.energy < 40) {
    profile.noiseMultiplier *= 1.2;
    profile.glitchChance *= 1.3;
}
if (state.energy < 20) {
    profile.noiseMultiplier *= 1.5;
    profile.glitchChance *= 1.8;
}

// 2) –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
if (state.stability < 60) {
    profile.glitchChance *= 1.4;
}
if (state.stability < 30) {
    profile.glitchChance *= 2.0;
    profile.silhouetteChance *= 1.5;
}

// 3) –ö–æ—Ä–ø—É—Å
if (state.hull < 70) {
    profile.silhouetteChance *= 1.4;
}
if (state.hull < 40) {
    profile.silhouetteChance *= 2.0;
    profile.noiseMultiplier *= 1.3;
}

// 4) –ö–∏—Å–ª–æ—Ä–æ–¥
if (state.oxy < 40) {
    // –ª—ë–≥–∫–æ–µ "–ø–ª–∞–≤–∞–Ω–∏–µ" –∫–∞–¥—Ä–∞
    const shift = Math.sin(timestamp / 120) * 2;
    cameraCtx.translate(shift, 0);
}

    // –±–∞–∑–æ–≤—ã–π —à—É–º
    const imageData = cameraCtx.createImageData(w, h);
    const buffer = imageData.data;

    for (let y = 0; y < h; y++) {
        for (let x = 0; x < w; x++) {
            const idx = (y * w + x) * 4;

            // –±–∞–∑–æ–≤—ã–π –±–µ–ª—ã–π —à—É–º
            let base = Math.random() * 255 * profile.noiseMultiplier;

            // –ª—ë–≥–∫–∏–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç (–∫–∞–∫ –ø–∞–¥–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏—è)
            base *= (0.8 + 0.2 * (y / h));

            // –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–≤–µ—Ç–∞ –ø–æ —Å–µ–∫—Ç–æ—Ä—É (tint)
            const r = base * profile.tint[0];
            const g = base * profile.tint[1];
            const b = base * profile.tint[2];

            buffer[idx] = r;
            buffer[idx + 1] = g;
            buffer[idx + 2] = b;
            buffer[idx + 3] = 255;
        }
    }

    cameraCtx.putImageData(imageData, 0, 0);

    // –≥–ª–∏—Ç—á–∏: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ/–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–¥–≤–∏–≥–∏ –∫—É—Å–æ—á–∫–æ–≤ –∫–∞—Ä—Ç–∏–Ω–∫–∏
    if (Math.random() < profile.glitchChance) {
        const glitchBands = 1 + Math.floor(Math.random() * 3);
        for (let i = 0; i < glitchBands; i++) {
            const bandHeight = Math.floor(randRange(h * 0.02, h * 0.1));
            const y = Math.floor(randRange(0, h - bandHeight));
            const shift = Math.floor(randRange(-w * 0.1, w * 0.1));

            const band = cameraCtx.getImageData(0, y, w, bandHeight);
            cameraCtx.clearRect(0, y, w, bandHeight);
            cameraCtx.putImageData(band, shift, y);
        }
    }

    // –ª—ë–≥–∫–æ–µ –¥—Ä–æ–∂–∞–Ω–∏–µ –∫–∞–¥—Ä–∞ (—Å–º–µ—â–µ–Ω–∏–µ –≤—Å–µ–≥–æ canvas —á–µ—Ä–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –Ω–µ –¥–µ–ª–∞—Ç—å ‚Äî –∏–º–∏—Ç–∏—Ä—É–µ–º –ª–∏–Ω–∏—è–º–∏)
    // –¥–æ–±–∞–≤–∏–º –ø–∞—Ä—É –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö "—è—Ä–∫–∏—Ö" –ª–∏–Ω–∏–π
    if (Math.random() < 0.2) {
        cameraCtx.fillStyle = "rgba(200, 255, 220, 0.15)";
        const lineY = Math.floor(randRange(0, h));
        cameraCtx.fillRect(0, lineY, w, 1);
    }

    // —Å–∏–ª—É—ç—Ç—ã / —Ç–µ–Ω–∏ (—Ä–µ–¥–∫–æ, –Ω–æ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ)
    const silhouetteRoll = Math.random();
    if (silhouetteRoll < profile.silhouetteChance) {
        drawSilhouette(cameraCtx, w, h, profile);
        // –≤–∫–ª—é—á–∞–µ–º –∞–Ω–æ–º–∞–ª—å–Ω—ã–π –±–ª–µ—Å–∫ —Ä–∞–º–∫–∏
        cameraScreenWrapper.classList.add("anomaly");
        setTimeout(() => cameraScreenWrapper.classList.remove("anomaly"), 200);
    }

// === 3. –í—Å–ø—ã—à–∫–∞ ===
if (cameraFlash) {
    cameraCtx.fillStyle = "rgba(255,255,255,0.8)";
    cameraCtx.fillRect(0, 0, cameraCanvas.width, cameraCanvas.height);
    cameraFlash = false;
}

// === 4. –°–∏–ª—å–Ω—ã–π –≥–ª–∏—Ç—á ===
if (cameraStrongGlitch) {
    const w = cameraCanvas.width;
    const h = cameraCanvas.height;
    const bandHeight = Math.floor(h * 0.2);
    const y = Math.floor(Math.random() * (h - bandHeight));
    const shift = Math.floor((Math.random() - 0.5) * w * 0.4);

    const band = cameraCtx.getImageData(0, y, w, bandHeight);
    cameraCtx.clearRect(0, y, w, bandHeight);
    cameraCtx.putImageData(band, shift, y);

    cameraStrongGlitch = false;
}

// === 5. –ê–Ω–æ–º–∞–ª—å–Ω—ã–π –ø–∏–∫ ===
if (cameraStaticBoost) {
    cameraCtx.globalAlpha = 0.2;
    cameraCtx.fillStyle = "rgba(0,255,180,0.4)";
    cameraCtx.fillRect(0, 0, cameraCanvas.width, cameraCanvas.height);
    cameraCtx.globalAlpha = 1;
    cameraStaticBoost = false;
}

// === 6. –ù–µ–ø–æ–¥–≤–∏–∂–Ω—ã–π —Å–∏–ª—É—ç—Ç ===
if (cameraSilhouetteHold > 0) {
    drawSilhouette(cameraCtx, cameraCanvas.width, cameraCanvas.height, getSectorProfile(currentSector));
    cameraSilhouetteHold--;
}

// –µ—Å–ª–∏ –±—ã–ª translate ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
cameraCtx.setTransform(1, 0, 0, 1, 0, 0);

    requestAnimationFrame(drawCameraFrame);
}

// —Ä–∏—Å—É–µ–º ‚Äú—Å–∏–ª—É—ç—Ç‚Äù –ø—Ä–æ—Å—Ç–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–µ–π
function drawSilhouette(ctx, w, h, profile) {
    ctx.save();

    // –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Å–∏–ª—É—ç—Ç–∞
    const alpha = currentSector === "C-07" ? 0.65 : 0.55;
    ctx.globalAlpha = alpha;
    ctx.fillStyle = "rgba(0,0,0,1)";

    // === –°–õ–£–ß–ê–ô–ù–ê–Ø –ü–û–ó–ò–¶–ò–Ø ===
    // –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å ‚Äî –ø–æ—á—Ç–∏ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
    const x = randRange(w * 0.25, w * 0.75);

    // –≤–µ—Ä—Ç–∏–∫–∞–ª—å ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ–∫—Ç–æ—Ä–∞
    let y;
    if (currentSector === "C-07") {
        // –≥—Ä—É–∑–æ–≤–æ–π –æ—Ç—Å–µ–∫ ‚Äî —Å–∏–ª—É—ç—Ç –Ω–∏–∂–µ
        y = randRange(h * 0.55, h * 0.9);
    } else {
        y = randRange(h * 0.35, h * 0.8);
    }

    // === –°–õ–£–ß–ê–ô–ù–´–ô –†–ê–ó–ú–ï–† ===
    const scale = randRange(0.8, 1.25); // –æ—Ç –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –¥–æ –∫—Ä—É–ø–Ω–æ–≥–æ
    const bodyW = w * 0.18 * scale;
    const bodyH = h * 0.28 * scale;
    const headR = w * 0.09 * scale;

    // === –¢–ï–õ–û ===
    ctx.beginPath();
    ctx.ellipse(x, y, bodyW, bodyH, 0, 0, Math.PI * 2);
    ctx.fill();

    // === –ì–û–õ–û–í–ê ===
    ctx.beginPath();
    ctx.arc(x, y - bodyH * 1.1, headR, 0, Math.PI * 2);
    ctx.fill();

    // === –ö–û–ù–¢–£–† ===
    ctx.globalAlpha = 0.25;
    ctx.strokeStyle = "rgba(0,0,0,0.9)";
    ctx.lineWidth = 3;
    ctx.stroke();

    // === –í–ù–£–¢–†–ï–ù–ù–Ø–Ø –¢–ï–ù–¨ ===
    ctx.globalAlpha = 0.15;
    ctx.fillStyle = "rgba(0,0,0,0.8)";
    ctx.beginPath();
    ctx.ellipse(x, y, bodyW * 0.7, bodyH * 0.6, 0, 0, Math.PI * 2);
    ctx.fill();

    ctx.restore();
}

// –∑–∞–ø—É—Å–∫
setCameraSector(currentSector);
requestAnimationFrame(drawCameraFrame);

// === –ì–ï–ù–ï–†–ê–¢–û–† –°–û–ë–´–¢–ò–ô –ö–ê–ú–ï–†–´ ===
function cameraEventTick() {
    const roll = Math.random();

    if (roll < 0.05) {
        cameraFreeze = true;
        cameraStats.freeze++; // —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        cameraLog("–°–∏–≥–Ω–∞–ª –∑–∞–≤–∏—Å.");
        setTimeout(() => cameraFreeze = false, 800);
    }
    else if (roll < 0.10) {
        cameraBlackout = true;
        cameraStats.blackout++; // —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        cameraLog("–ü–æ—Ç–µ—Ä—è —Å–∏–≥–Ω–∞–ª–∞.");
        setTimeout(() => cameraBlackout = false, 600);
    }
    else if (roll < 0.15) {
        cameraFlash = true;
        cameraStats.flash++; // —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        cameraLog("–í—Å–ø—ã—à–∫–∞ –≤ —Å–µ–∫—Ç–æ—Ä–µ.");
    }
    else if (roll < 0.22) {
        cameraStrongGlitch = true;
        cameraStats.glitch++; // —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        cameraLog("–°–∏–ª—å–Ω–∞—è –ø–æ–º–µ—Ö–∞.");
    }
    else if (roll < 0.28) {
        cameraStaticBoost = true;
        cameraStats.anomaly++; // —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        cameraLog("–ê–Ω–æ–º–∞–ª—å–Ω—ã–π –ø–∏–∫ —Å–∏–≥–Ω–∞–ª–∞.");
    }
    else if (roll < 0.32) {
        cameraSilhouetteHold = 30; // 30 –∫–∞–¥—Ä–æ–≤ ‚âà 0.5 —Å–µ–∫
        cameraStats.silhouette++; // —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        cameraLog("–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –¥–≤–∏–∂–µ–Ω–∏–µ.");
    }

    setTimeout(cameraEventTick, 3000 + Math.random() * 4000);
}

cameraEventTick();

    updateUI();
    setTimeout(randomEventTick, 10000);
</script>

</body>
</html>
